### 4.3 同步和透明可扩展性

CUDA 允许同一block内的线程使用屏障同步函数 \_\_syncthreads() 来协调它们的活动。注意，“\_\_” 由两个 “_” 字符组成。当一个线程调用 __syncthreads() 时，它将在调用的程序位置处停留，直到同一block中的每个线程都到达该位置。这确保了一个block中的所有线程都已完成其执行的某个阶段，然后才能继续到下一个阶段。

屏障同步是一种简单且流行的协调并行活动的方法。在现实生活中，我们经常使用屏障同步来协调多人的并行活动。例如，假设四个朋友开车去购物中心。他们可以各自去不同的商店购物。这是一种并行活动，比他们作为一个整体依次访问所有感兴趣的商店要高效得多。然而，在离开购物中心之前需要进行屏障同步。他们必须等到四个朋友都回到车里后才能离开。那些比其他人早完成购物的人必须等待那些较晚完成购物的人。如果没有屏障同步，当车离开时，可能会有一个或多个人被留在购物中心，这可能会严重损害他们的友谊！